{"version":3,"sources":["node_modules/deepmerge/dist/cjs.js","NestedMenu.js","script.js"],"names":["isMergeableObject","value","isNonNullObject","isSpecial","stringValue","Object","prototype","toString","call","isReactElement","canUseSymbol","Symbol","for","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","val","Array","isArray","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","defaultArrayMerge","target","source","concat","map","element","getMergeFunction","key","customMerge","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getKeys","keys","propertyIsOnObject","object","property","_","propertyIsUnsafe","hasOwnProperty","mergeObject","destination","forEach","arrayMerge","sourceIsArray","all","array","Error","reduce","prev","next","deepmerge_1","module","exports","NestedMenu","selector","url","classes","mobileMaxWidth","mouseMoveResetTimeout","menu","document","querySelector","data","button","activeNestedListEl","isActive","listWrapper","title","close","back","blackout","defaultMenuTitle","menuResetTimeout","activated","fetch","then","response","json","init","obj","base","active","menuWrapper","list","el","nested","elIcon","elTitle","mobileTop","addEventListener","onButtonClick","innerText","reset","backToPrevious","catch","e","console","error","generateTemplate","createList","listEl","createElement","classList","add","temp","setAttribute","link","appendChild","icon","style","backgroundImage","prepend","child","childList","onNestedElClick","querySelectorAll","window","requestAnimationFrame","onWindowClick","onResize","toggleBlackout","isMobile","onMouseMove","preventDefault","enableEl","closest","isInsideMenu","resetMouseMoveTimer","setTimeout","isMobileTop","shiftListBy","length","removeEventListener","contains","push","disableUnnecessaryEl","setTitle","log","getAncestors","arr","current","parentNode","reverse","some","x","remove","text","clearTimeout","pop","innerWidth","action","n","transform"],"mappings":"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","file":"script.0c23e7a3.js","sourceRoot":"..","sourcesContent":["'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","import deepmerge from 'deepmerge';\n\n/* \n  Логика для всплывающего меню с несколькими уровнями вложенности\n\n  В качестве параметров можно передавать:\n  selector - селектор оснвного элемента-родителя\n  url - ссылка с данными из которых будет формироваться меню, пример структуры можно посмотреть в файле /data.json\n  classes - объект с классами для основных элементов, структуру можно увидеть ниже\n  mobileMaxWidth - на каком максимальном разрешении меню будет работать в мобильном режиме\n*/\n\nexport default function NestedMenu({\n  selector = '.bem-nested-menu',\n  url,\n  classes = {},\n  mobileMaxWidth = 767,\n  mouseMoveResetTimeout = 3000,\n} = {}) {\n  let menu = document.querySelector(selector);\n  if (!menu) return;\n\n  let data, button, nestedListEl, activeNestedListEl, isActive, menuWrapper, listWrapper, title, close, back, blackout, defaultMenuTitle, menuResetTimeout;\n  let activated = false;\n  downloadData();\n\n  function downloadData() {\n    fetch(url)\n      .then(response => response.json())\n      .then(json => {\n        data = json;\n        init();\n      })\n      .catch(e => console.error('Невозможно проинициализировать вложенное меню', e));\n  }\n\n  // Первоначальная инициализация при загрузке страницы: поиск элементов, присвоение стандартных значений \n  function init() {\n    activeNestedListEl = [];\n    isActive = false;\n    classes = getClasses(classes);\n    menuWrapper = menu.querySelector(`.${classes.menuWrapper.base}`);\n    listWrapper = menu.querySelector(`.${classes.listWrapper.base}`);\n    button = menu.querySelector(`.${classes.button.base}`);\n    button.addEventListener('click', onButtonClick);\n\n    blackout = document.querySelector(`.${classes.blackout.base}`);\n    title = menu.querySelector(`.${classes.title.base}`);\n    defaultMenuTitle = title.innerText;\n    close = menu.querySelector(`.${classes.close.base}`);\n    back = menu.querySelector(`.${classes.back.base}`);\n    close.addEventListener('click', reset);\n    back.addEventListener('click', backToPrevious);\n  }\n\n  // при клике на кнопку-активатор\n  function onButtonClick(e) {\n    // если активируем в первый раз - генерируем html\n    if (!activated) {\n      generateTemplate();\n      nestedListEl = menu.querySelectorAll(`.${classes.el.nested} > .${classes.elTitle.base}`);\n      activated = true;\n    }\n\n    if (isActive) {\n      reset();\n    } else {\n      isActive = true;\n      button.classList.add(classes.button.active);\n      menu.classList.add(classes.menu.active);\n      window.requestAnimationFrame(() => window.addEventListener('click', onWindowClick));\n      window.addEventListener('resize', onResize);\n      toggleBlackout('on');\n      if (!isMobile()) window.addEventListener('mousemove', onMouseMove);\n    }\n  }\n\n  function onNestedElClick(e) {\n    e.preventDefault();\n    enableEl(e.target.closest(`.${classes.el.base}`));\n  }\n\n  function onMouseMove(e) {\n    let isInsideMenu = e.target.closest(`.${classes.listWrapper.base}`);\n    if (isInsideMenu) {\n      let el = e.target.closest(`.${classes.el.base}`);\n      resetMouseMoveTimer();\n      if (el) enableEl(el)\n    } else {\n      if (!menuResetTimeout) menuResetTimeout = setTimeout(reset, mouseMoveResetTimeout);\n    }\n  }\n\n  function onWindowClick(e) {\n    let isInsideMenu = e.target.closest(`.${classes.list.base}`);\n    let isMobileTop = e.target.closest(`.${classes.mobileTop.base}`);\n    if (!isInsideMenu && !isMobileTop) reset();\n  }\n\n  function onResize() {\n    if (isMobile()) {\n      shiftListBy(activeNestedListEl.length);\n      resetMouseMoveTimer();\n      window.removeEventListener('mousemove', onMouseMove);\n    } else {\n      shiftListBy(0);\n      window.addEventListener('mousemove', onMouseMove);\n    }\n  }\n\n  // при активации элемента со вложенными пунктами\n  function enableEl(el) {\n    if (!el.classList.contains(classes.el.active) && el.classList.contains(classes.el.nested)) {\n      activeNestedListEl.push(el);\n      el.classList.add(classes.el.active);\n      disableUnnecessaryEl(el);\n      setTitle(el);\n      back.classList.add(classes.back.active);\n      if (isMobile()) shiftListBy(activeNestedListEl.length);\n      log();\n    } else if (!el.classList.contains(classes.el.nested)) {\n      disableUnnecessaryEl(el);\n      setTitle(activeNestedListEl[activeNestedListEl.length - 1]);\n    }\n  }\n\n  function disableUnnecessaryEl(el) {\n    let list = getAncestors(el);\n    activeNestedListEl.forEach((active) => {\n      if (!list.some(x => x === active)) {\n        active.classList.remove(classes.el.active);\n      }\n    })\n    activeNestedListEl = list;\n    if (activeNestedListEl.length === 0) back.classList.remove(classes.back.active); \n  }\n\n  // получаем все активные элементы выше по уровню от определенного элемента\n  function getAncestors(el) {\n    let arr = [];\n    let current = el;\n    while (current.parentNode !== menu) {\n      if (current.classList.contains(classes.el.nested)) {\n        arr.push(current);\n      }\n      current = current.parentNode;\n    }\n    return arr.reverse();\n  }\n  \n  function setTitle(el) {\n    let text = defaultMenuTitle;\n    if (el) text = el.querySelector(`.${classes.elTitle.base}`).innerText;\n    title.innerText = text;\n  }\n\n  function reset() {\n    isActive = false;\n    activeNestedListEl.forEach(el => el.classList.remove(classes.el.active));\n    activeNestedListEl = [];\n    button.classList.remove(classes.button.active);\n    menu.classList.remove(classes.menu.active);\n    window.removeEventListener('click', onWindowClick);\n    window.removeEventListener('resize', onResize);\n    setTitle();\n    shiftListBy(0);\n    back.classList.remove(classes.back.active); \n    toggleBlackout('off');\n    resetMouseMoveTimer();\n    if (!isMobile()) {\n      window.removeEventListener('mousemove', onMouseMove);\n    }\n    log();\n  }\n\n  function resetMouseMoveTimer() {\n    if (menuResetTimeout) {\n      clearTimeout(menuResetTimeout)\n      menuResetTimeout = null;\n    };\n  }\n\n  function getClasses(obj) {\n    return deepmerge({\n      blackout: {\n        base: 'bem-blackout',\n        active: 'bem-blackout_active',\n      },\n      menu: {\n        base: 'bem-nested-menu',\n        active: 'bem-nested-menu_active',\n      },\n      button: {\n        base: 'bem-nested-menu__button',\n        active: 'bem-nested-menu__button_active',\n      },\n      close: {\n        base: 'bem-nested-menu__mobile-close',\n      },\n      back: {\n        base: 'bem-nested-menu__mobile-back',\n        active: 'bem-nested-menu__mobile-back_active',\n      },\n      title: {\n        base: 'bem-nested-menu__mobile-title',\n      },\n      menuWrapper: {\n        base: 'bem-nested-menu__menu-wrapper',\n      },\n      listWrapper: {\n        base: 'bem-nested-menu__list-wrapper',\n      },\n      list: {\n        base: 'bem-nested-menu__list',\n        active: 'bem-nested-menu__list_active',\n      },\n      el: {\n        base: 'bem-nested-menu__el',\n        nested: 'bem-nested-menu__el_nested',\n        active: 'bem-nested-menu__el_active',\n      },\n      elIcon: {\n        base: 'bem-nested-menu__el-icon',\n      },\n      elTitle: {\n        base: 'bem-nested-menu__el-title',\n      },\n      mobileTop: {\n        base: 'bem-nested-menu__mobile-top',\n      }\n    }, \n    obj);\n  }\n\n  function generateTemplate() {\n    let el = createList(data);\n    listWrapper.appendChild(el);\n  }\n\n  function createList(list) {\n    let listEl = document.createElement('div');\n    listEl.classList.add(classes.list.base);\n    list.forEach((el) => {\n      let temp = document.createElement('div');\n      temp.classList.add(classes.el.base);\n  \n      let title = document.createElement('a');\n      title.innerText = el.title;\n      title.setAttribute('href', el.link);\n      title.classList.add(classes.elTitle.base);\n      temp.appendChild(title);\n      if (el.icon) {\n        let icon = document.createElement('div');\n        icon.classList.add(classes.elIcon.base);\n        icon.style.backgroundImage = `url(${el.icon})`;\n        title.prepend(icon);\n      }\n\n      if (el.child) {\n        let childList = createList(el.child);\n        temp.classList.add(classes.el.nested);\n        temp.appendChild(childList);\n        temp.addEventListener('click', onNestedElClick);\n      };\n\n      listEl.appendChild(temp);\n    })\n\n    return listEl;\n  }\n\n  function backToPrevious() {\n    let el = activeNestedListEl.pop();\n    el.classList.remove(classes.el.active);\n    setTitle(activeNestedListEl[activeNestedListEl.length - 1]);\n    shiftListBy(activeNestedListEl.length);\n    if (activeNestedListEl.length === 0) {\n      back.classList.remove(classes.back.active);\n    }\n  }\n\n  function isMobile() {\n    return window.innerWidth <= mobileMaxWidth;\n  }\n\n  function toggleBlackout(action = 'on') {\n    blackout.classList[action === 'on' ? 'add' : 'remove'](classes.blackout.active);\n  }\n\n  function shiftListBy(n) {\n    listWrapper.querySelector(`.${classes.list.base}`).style.transform = `translateX(-${n * 100}%)`;\n  }\n\n  function log() {\n    console.log('Данные для дебага всплывающего меню:', {\n      activeNestedListEl,\n    });\n  }\n\n  return {\n    reset,\n  }\n}","import NestedMenu from './NestedMenu';\n\nNestedMenu({\n  url: 'https://jsonp.afeld.me/?url=https%3A%2F%2Fartmizu.ru%2Fscreenshots%2Fdata.json',\n});"]}