{"version":3,"sources":["node_modules/deepmerge/dist/cjs.js","NestedMenu.js","script.js"],"names":["isMergeableObject","value","isNonNullObject","isSpecial","stringValue","Object","prototype","toString","call","isReactElement","canUseSymbol","Symbol","for","REACT_ELEMENT_TYPE","$$typeof","emptyTarget","val","Array","isArray","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","defaultArrayMerge","target","source","concat","map","element","getMergeFunction","key","customMerge","getEnumerableOwnPropertySymbols","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getKeys","keys","propertyIsOnObject","object","property","_","propertyIsUnsafe","hasOwnProperty","mergeObject","destination","forEach","arrayMerge","sourceIsArray","all","array","Error","reduce","prev","next","deepmerge_1","module","exports","NestedMenu","selector","baseMenuURL","nestedMenuURL","classes","mobileMaxWidth","mouseMoveResetTimeout","maxFailedRequestCount","failedRequestInterval","menu","document","querySelector","baseListData","button","activeNestedListEl","isActive","listWrapper","title","close","back","blackout","defaultMenuTitle","menuResetTimeout","failedRequestCount","activated","downloadData","url","afterDownload","d","init","obj","base","active","menuWrapper","list","el","loading","nested","elIcon","elTitle","mobileTop","getClasses","addEventListener","onButtonClick","innerText","reset","backToPrevious","id","console","error","fetch","then","response","json","catch","e","setTimeout","warn","generateBaseList","createList","appendChild","querySelectorAll","classList","add","window","requestAnimationFrame","onWindowClick","onResize","toggleBlackout","isMobile","onMouseMove","onNestedElClick","alreadyActive","contains","preventDefault","enableEl","isInsideMenu","closest","resetMouseMoveTimer","isMobileTop","shiftListBy","length","removeEventListener","dataset","downloaded","enableMenulEl","data","child","remove","disableUnnecessaryEl","setTitle","push","log","getAncestors","arr","current","parentNode","reverse","some","x","text","clearTimeout","listEl","createElement","temp","class","elClass","icon","style","backgroundImage","prepend","link","setAttribute","childList","pop","innerWidth","action","n","transform","scrollTop"],"mappings":"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","file":"script.e6279dd9.js","sourceRoot":"..","sourcesContent":["'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn target.propertyIsEnumerable(symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","import deepmerge from 'deepmerge';\n\n/* \n  Логика для всплывающего меню с несколькими уровнями вложенности\n\n  В качестве параметров можно передавать:\n  selector - селектор оснвного элемента-родителя\n\tbaseMenuURL - ссылка на структуру базового меню, пример структуры в файле /baseMenuData.json\n\tnestedMenuURL - ссылка, в конец которой будут вставляться id'шники элементов меню (например при ссылке http://artmizu.ru/screenshots/ \n\tзапрос на пункт меню с id 4 будет таким http://artmizu.ru/screenshots/4). Ответ должен содержать структуру пункта меню, пример структуры в файле /nestedMenuElData.json. Если nestedMenuURL не предоставлен, то используется baseMenuURL\n  classes - объект с классами для основных элементов, структуру можно увидеть ниже\n\tmobileMaxWidth - на каком максимальном разрешении меню будет работать в мобильном режиме\n\tmaxFailedRequestCount - кол-во попыток запросить данные для меню\n\tfailedRequestInterval - интервал между попытками загрузки\n*/\n\nexport default function NestedMenu({\n\tselector = '.bem-nested-menu',\n\tbaseMenuURL,\n\tnestedMenuURL,\n\tclasses = {},\n\tmobileMaxWidth = 767,\n\tmouseMoveResetTimeout = 3000,\n\tmaxFailedRequestCount = 3,\n\tfailedRequestInterval = 1500,\n} = {}) {\n\tlet menu = document.querySelector(selector);\n\tif (!menu) return;\n\n\tlet baseListData,\n\t\tbutton,\n\t\tnestedListEl,\n\t\tactiveNestedListEl,\n\t\tisActive,\n\t\tmenuWrapper,\n\t\tlistWrapper,\n\t\ttitle,\n\t\tclose,\n\t\tback,\n\t\tblackout,\n\t\tdefaultMenuTitle,\n\t\tmenuResetTimeout,\n\t\tfailedRequestCount = 0;\n\tlet activated = false;\n\tdownloadData({\n\t\turl: baseMenuURL,\n\t\tafterDownload(d) {\n\t\t\tbaseListData = d;\n\t\t\tinit();\n\t\t},\n\t});\n\n\tfunction downloadData({ id, url, afterDownload = () => {} } = {}) {\n\t\tif (failedRequestCount > maxFailedRequestCount) {\n\t\t\tconsole.error(`Невозможно загрузить данные для меню после ${failedRequestCount} попыток`);\n\t\t} else {\n\t\t\tlet u = id ? url + id : url;\n\t\t\tfetch(u)\n\t\t\t\t.then((response) => response.json())\n\t\t\t\t.then((json) => {\n\t\t\t\t\tfailedRequestCount = 0;\n\t\t\t\t\tafterDownload(json);\n\t\t\t\t})\n\t\t\t\t.catch((e) => {\n\t\t\t\t\tfailedRequestCount += 1;\n\t\t\t\t\tsetTimeout(() => downloadData({ id, url, afterDownload }), failedRequestInterval);\n\t\t\t\t\tconsole.warn(`Данные для меню загрузить не удалось после ${failedRequestCount} попытки`, e);\n\t\t\t\t});\n\t\t}\n\t}\n\n\t// Первоначальная инициализация при загрузке страницы: поиск элементов, присвоение стандартных значений\n\tfunction init() {\n\t\tactiveNestedListEl = [];\n\t\tisActive = false;\n\t\tclasses = getClasses(classes);\n\t\tif (!nestedMenuURL) nestedMenuURL = baseMenuURL ? baseMenuURL : null;\n\t\tmenuWrapper = menu.querySelector(`.${classes.menuWrapper.base}`);\n\t\tlistWrapper = menu.querySelector(`.${classes.listWrapper.base}`);\n\t\tbutton = menu.querySelector(`.${classes.button.base}`);\n\t\tbutton.addEventListener('click', onButtonClick);\n\n\t\tblackout = document.querySelector(`.${classes.blackout.base}`);\n\t\ttitle = menu.querySelector(`.${classes.title.base}`);\n\t\tdefaultMenuTitle = title.innerText;\n\t\tclose = menu.querySelector(`.${classes.close.base}`);\n\t\tback = menu.querySelector(`.${classes.back.base}`);\n\t\tclose.addEventListener('click', reset);\n\t\tback.addEventListener('click', backToPrevious);\n\t}\n\n\t// при клике на кнопку-активатор\n\tfunction onButtonClick(e) {\n\t\t// если активируем в первый раз - генерируем html\n\t\tif (!activated) {\n\t\t\tgenerateBaseList();\n\t\t\tnestedListEl = menu.querySelectorAll(`.${classes.el.nested} > .${classes.elTitle.base}`);\n\t\t\tactivated = true;\n\t\t}\n\n\t\tif (isActive) {\n\t\t\treset();\n\t\t} else {\n\t\t\tisActive = true;\n\t\t\tbutton.classList.add(classes.button.active);\n\t\t\tmenu.classList.add(classes.menu.active);\n\t\t\twindow.requestAnimationFrame(() => window.addEventListener('click', onWindowClick));\n\t\t\twindow.addEventListener('resize', onResize);\n\t\t\ttoggleBlackout('on');\n\t\t\tif (!isMobile()) window.addEventListener('mousemove', onMouseMove);\n\t\t}\n\t}\n\n\tfunction onNestedElClick(e) {\n\t\tlet alreadyActive = this.classList.contains(classes.el.active);\n\t\tif (isMobile()) e.preventDefault();\n\t\tif (alreadyActive) return;\n\n\t\tenableEl(this);\n\t}\n\n\tfunction onMouseMove(e) {\n\t\tlet isInsideMenu = e.target.closest(`.${classes.listWrapper.base}`);\n\t\tif (isInsideMenu) {\n\t\t\tlet el = e.target.closest(`.${classes.el.base}`);\n\t\t\tresetMouseMoveTimer();\n\t\t\tif (el) enableEl(el);\n\t\t} else {\n\t\t\tif (!menuResetTimeout) menuResetTimeout = setTimeout(reset, mouseMoveResetTimeout);\n\t\t}\n\t}\n\n\tfunction onWindowClick(e) {\n\t\tlet isInsideMenu = e.target.closest(`.${classes.list.base}`);\n\t\tlet isMobileTop = e.target.closest(`.${classes.mobileTop.base}`);\n\t\tif (!isInsideMenu && !isMobileTop) reset();\n\t}\n\n\tfunction onResize() {\n\t\tif (isMobile()) {\n\t\t\tshiftListBy(activeNestedListEl.length);\n\t\t\tresetMouseMoveTimer();\n\t\t\twindow.removeEventListener('mousemove', onMouseMove);\n\t\t} else {\n\t\t\tshiftListBy(0);\n\t\t\twindow.addEventListener('mousemove', onMouseMove);\n\t\t}\n\t}\n\n\t// при активации элемента со вложенными пунктами\n\tfunction enableEl(el) {\n\t\tif (!el.classList.contains(classes.el.active) && el.classList.contains(classes.el.nested)) {\n\t\t\tif (!el.dataset.downloaded) {\n\t\t\t\tel.dataset.downloaded = true;\n\t\t\t\tel.classList.add(classes.el.loading);\n\t\t\t\tdownloadData({\n\t\t\t\t\tid: +el.dataset.id,\n\t\t\t\t\turl: nestedMenuURL,\n\t\t\t\t\tafterDownload(data) {\n\t\t\t\t\t\tlet list = createList(data.child);\n\t\t\t\t\t\tel.appendChild(list);\n\t\t\t\t\t\tel.classList.remove(classes.el.loading);\n\t\t\t\t\t\tenableMenulEl(el);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tenableMenulEl(el);\n\t\t\t}\n\t\t} else if (!el.classList.contains(classes.el.nested)) {\n\t\t\tdisableUnnecessaryEl(el);\n\t\t\tsetTitle(activeNestedListEl[activeNestedListEl.length - 1]);\n\t\t}\n\t}\n\n\tfunction enableMenulEl(el) {\n\t\tactiveNestedListEl.push(el);\n\t\tel.classList.add(classes.el.active);\n\t\tdisableUnnecessaryEl(el);\n\t\tsetTitle(el);\n\t\tback.classList.add(classes.back.active);\n\t\tif (isMobile()) {\n\t\t\tshiftListBy(activeNestedListEl.length);\n\t\t}\n\t\tlog();\n\t}\n\n\tfunction disableUnnecessaryEl(el) {\n\t\tlet list = getAncestors(el);\n\t\tactiveNestedListEl.forEach((active) => {\n\t\t\tif (!list.some((x) => x === active)) {\n\t\t\t\tactive.classList.remove(classes.el.active);\n\t\t\t}\n\t\t});\n\t\tactiveNestedListEl = list;\n\t\tif (activeNestedListEl.length === 0) back.classList.remove(classes.back.active);\n\t}\n\n\t// получаем все активные элементы выше по уровню от определенного элемента\n\tfunction getAncestors(el) {\n\t\tlet arr = [];\n\t\tlet current = el;\n\t\twhile (current.parentNode !== menu) {\n\t\t\tif (current.classList.contains(classes.el.nested)) {\n\t\t\t\tarr.push(current);\n\t\t\t}\n\t\t\tcurrent = current.parentNode;\n\t\t}\n\t\treturn arr.reverse();\n\t}\n\n\tfunction setTitle(el) {\n\t\tlet text = defaultMenuTitle;\n\t\tif (el) text = el.querySelector(`.${classes.elTitle.base}`).innerText;\n\t\ttitle.innerText = text;\n\t}\n\n\tfunction reset() {\n\t\tisActive = false;\n\t\tactiveNestedListEl.forEach((el) => el.classList.remove(classes.el.active));\n\t\tactiveNestedListEl = [];\n\t\tbutton.classList.remove(classes.button.active);\n\t\tmenu.classList.remove(classes.menu.active);\n\t\twindow.removeEventListener('click', onWindowClick);\n\t\twindow.removeEventListener('resize', onResize);\n\t\tsetTitle();\n\t\tshiftListBy(0);\n\t\tback.classList.remove(classes.back.active);\n\t\ttoggleBlackout('off');\n\t\tresetMouseMoveTimer();\n\t\tif (!isMobile()) {\n\t\t\twindow.removeEventListener('mousemove', onMouseMove);\n\t\t}\n\t\tlog();\n\t}\n\n\tfunction resetMouseMoveTimer() {\n\t\tif (menuResetTimeout) {\n\t\t\tclearTimeout(menuResetTimeout);\n\t\t\tmenuResetTimeout = null;\n\t\t}\n\t}\n\n\tfunction getClasses(obj) {\n\t\treturn deepmerge(\n\t\t\t{\n\t\t\t\tblackout: {\n\t\t\t\t\tbase: 'bem-blackout',\n\t\t\t\t\tactive: 'bem-blackout_active',\n\t\t\t\t},\n\t\t\t\tmenu: {\n\t\t\t\t\tbase: 'bem-nested-menu',\n\t\t\t\t\tactive: 'bem-nested-menu_active',\n\t\t\t\t},\n\t\t\t\tbutton: {\n\t\t\t\t\tbase: 'bem-nested-menu__button',\n\t\t\t\t\tactive: 'bem-nested-menu__button_active',\n\t\t\t\t},\n\t\t\t\tclose: {\n\t\t\t\t\tbase: 'bem-nested-menu__mobile-close',\n\t\t\t\t},\n\t\t\t\tback: {\n\t\t\t\t\tbase: 'bem-nested-menu__mobile-back',\n\t\t\t\t\tactive: 'bem-nested-menu__mobile-back_active',\n\t\t\t\t},\n\t\t\t\ttitle: {\n\t\t\t\t\tbase: 'bem-nested-menu__mobile-title',\n\t\t\t\t},\n\t\t\t\tmenuWrapper: {\n\t\t\t\t\tbase: 'bem-nested-menu__menu-wrapper',\n\t\t\t\t},\n\t\t\t\tlistWrapper: {\n\t\t\t\t\tbase: 'bem-nested-menu__list-wrapper',\n\t\t\t\t},\n\t\t\t\tlist: {\n\t\t\t\t\tbase: 'bem-nested-menu__list',\n\t\t\t\t\tactive: 'bem-nested-menu__list_active',\n\t\t\t\t},\n\t\t\t\tel: {\n\t\t\t\t\tbase: 'bem-nested-menu__el',\n\t\t\t\t\tloading: 'bem-nested-menu__el_loading',\n\t\t\t\t\tnested: 'bem-nested-menu__el_nested',\n\t\t\t\t\tactive: 'bem-nested-menu__el_active',\n\t\t\t\t},\n\t\t\t\telIcon: {\n\t\t\t\t\tbase: 'bem-nested-menu__el-icon',\n\t\t\t\t},\n\t\t\t\telTitle: {\n\t\t\t\t\tbase: 'bem-nested-menu__el-title',\n\t\t\t\t},\n\t\t\t\tmobileTop: {\n\t\t\t\t\tbase: 'bem-nested-menu__mobile-top',\n\t\t\t\t},\n\t\t\t},\n\t\t\tobj,\n\t\t);\n\t}\n\n\tfunction generateBaseList() {\n\t\tlet el = createList(baseListData);\n\t\tlistWrapper.appendChild(el);\n\t}\n\n\tfunction createList(list) {\n\t\tlet listEl = document.createElement('div');\n\t\tlistEl.classList.add(classes.list.base);\n\t\tlist.forEach((el) => {\n\t\t\tlet temp = document.createElement('div');\n\t\t\ttemp.classList.add(classes.el.base);\n\t\t\ttemp.dataset.id = el.id;\n\t\t\tif (el.class && el.class.length > 0) {\n\t\t\t\tel.class.forEach((elClass) => temp.classList.add(elClass));\n\t\t\t}\n\n\t\t\tlet title = document.createElement('a');\n\t\t\ttitle.innerText = el.title;\n\t\t\ttitle.classList.add(classes.elTitle.base);\n\t\t\ttemp.appendChild(title);\n\t\t\tif (el.icon) {\n\t\t\t\tlet icon = document.createElement('div');\n\t\t\t\ticon.classList.add(classes.elIcon.base);\n\t\t\t\ticon.style.backgroundImage = `url(${el.icon})`;\n\t\t\t\ttitle.prepend(icon);\n\t\t\t}\n\n\t\t\tif (el.link) {\n\t\t\t\ttitle.setAttribute('href', el.link);\n\t\t\t}\n\n\t\t\tif (el.child) {\n\t\t\t\ttemp.classList.add(classes.el.nested);\n\t\t\t\ttemp.addEventListener('click', onNestedElClick);\n\t\t\t\tif (typeof el.child === 'object') {\n\t\t\t\t\tlet childList = createList(el.child);\n\t\t\t\t\ttemp.appendChild(childList);\n\t\t\t\t\ttemp.dataset.downloaded = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlistEl.appendChild(temp);\n\t\t});\n\n\t\treturn listEl;\n\t}\n\n\tfunction backToPrevious() {\n\t\tlet el = activeNestedListEl.pop();\n\t\tel.classList.remove(classes.el.active);\n\t\tsetTitle(activeNestedListEl[activeNestedListEl.length - 1]);\n\t\tshiftListBy(activeNestedListEl.length);\n\t\tif (activeNestedListEl.length === 0) {\n\t\t\tback.classList.remove(classes.back.active);\n\t\t}\n\t}\n\n\tfunction isMobile() {\n\t\treturn window.innerWidth <= mobileMaxWidth;\n\t}\n\n\tfunction toggleBlackout(action = 'on') {\n\t\tblackout.classList[action === 'on' ? 'add' : 'remove'](classes.blackout.active);\n\t}\n\n\tfunction shiftListBy(n) {\n\t\tlistWrapper.querySelector(`.${classes.list.base}`).style.transform = `translateX(-${n * 100}%)`;\n\t\tlistWrapper.scrollTop = 0;\n\t}\n\n\tfunction log() {\n\t\tconsole.log('Данные для дебага всплывающего меню:', {\n\t\t\tactiveNestedListEl,\n\t\t});\n\t}\n\n\treturn {\n\t\treset,\n\t};\n}\n","import NestedMenu from './NestedMenu';\n\nNestedMenu({\n\tbaseMenuURL: 'https://artmizu.ru/screenshots/index.json',\n\tnestedMenuURL: 'https://artmizu.ru/screenshots/',\n});\n"]}